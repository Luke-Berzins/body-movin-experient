{"ast":null,"code":"function e(t) {\n  return (e = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n    return typeof e;\n  } : function (e) {\n    return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n  })(t);\n}\n\nfunction t(e, t) {\n  if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n}\n\nfunction n(e, t) {\n  for (var n = 0; n < t.length; n++) {\n    var i = t[n];\n    i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n  }\n}\n\nfunction i(e, t) {\n  if (null == e) return {};\n\n  var n,\n      i,\n      o = function (e, t) {\n    if (null == e) return {};\n    var n,\n        i,\n        o = {},\n        r = Object.keys(e);\n\n    for (i = 0; i < r.length; i++) n = r[i], t.indexOf(n) >= 0 || (o[n] = e[n]);\n\n    return o;\n  }(e, t);\n\n  if (Object.getOwnPropertySymbols) {\n    var r = Object.getOwnPropertySymbols(e);\n\n    for (i = 0; i < r.length; i++) n = r[i], t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (o[n] = e[n]);\n  }\n\n  return o;\n}\n\nfunction o(e, t) {\n  var n = t.get(e);\n  if (!n) throw new TypeError(\"attempted to get private field on non-instance\");\n  return n.get ? n.get.call(e) : n.value;\n}\n\nvar r = {\n  player: \"lottie-player\"\n},\n    a = function () {\n  function a() {\n    var n = this,\n        u = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : r,\n        c = u.actions,\n        f = u.container,\n        d = u.mode,\n        m = u.player,\n        v = i(u, [\"actions\", \"container\", \"mode\", \"player\"]);\n\n    if (t(this, a), s.set(this, {\n      writable: !0,\n      value: function (e) {\n        o(n, p).call(n, e.clientX, e.clientY);\n      }\n    }), l.set(this, {\n      writable: !0,\n      value: function () {\n        o(n, p).call(n, -1, -1);\n      }\n    }), p.set(this, {\n      writable: !0,\n      value: function (e, t) {\n        if (-1 !== e && -1 !== t) {\n          var i = n.getContainerCursorPosition(e, t);\n          e = i.x, t = i.y;\n        }\n\n        var o = n.actions.find(function (n) {\n          var i = n.position;\n          return Array.isArray(i.x) && Array.isArray(i.y) ? e >= i.x[0] && e <= i.x[1] && t >= i.y[0] && t <= i.y[1] : !Number.isNaN(i.x) && !Number.isNaN(i.y) && e === i.x && t === i.y;\n        });\n        if (o) if (\"seek\" === o.type) {\n          var r = (e - o.position.x[0]) / (o.position.x[1] - o.position.x[0]),\n              a = (t - o.position.y[0]) / (o.position.y[1] - o.position.y[0]);\n          n.player.playSegments(o.frames, !0), o.position.y[0] < 0 && o.position.y[1] > 1 ? n.player.goToAndStop(Math.floor(r * n.player.totalFrames), !0) : n.player.goToAndStop(Math.ceil((r + a) / 2 * n.player.totalFrames), !0);\n        } else \"loop\" === o.type ? n.player.playSegments(o.frames, !0) : \"play\" === o.type ? (!0 === n.player.isPaused && n.player.resetSegments(), n.player.playSegments(o.frames)) : \"stop\" === o.type && n.player.goToAndStop(o.frames[0], !0);\n      }\n    }), y.set(this, {\n      writable: !0,\n      value: function () {\n        var e = n.getContainerVisibility(),\n            t = n.actions.find(function (t) {\n          var n = t.visibility;\n          return e >= n[0] && e <= n[1];\n        });\n        t && (\"seek\" === t.type ? n.player.goToAndStop(Math.ceil((e - t.visibility[0]) / (t.visibility[1] - t.visibility[0]) * n.player.totalFrames), !0) : \"loop\" === t.type ? (null === n.assignedSegment || n.assignedSegment !== t.frames || !0 === n.player.isPaused) && (n.player.playSegments(t.frames, !0), n.assignedSegment = t.frames) : \"play\" === t.type ? !0 === n.player.isPaused && (n.player.resetSegments(), n.player.play()) : \"stop\" === t.type && n.player.goToAndStop(t.frames[0], !0));\n      }\n    }), \"object\" !== e(m) || \"AnimationItem\" !== m.constructor.name) {\n      if (\"string\" == typeof m) {\n        var g = document.querySelector(m);\n        g && \"LOTTIE-PLAYER\" === g.nodeName && (m = g.getLottie());\n      } else m instanceof HTMLElement && \"LOTTIE-PLAYER\" === m.nodeName && (m = m.getLottie());\n\n      if (!m) throw new Error(\"\".concat(\"[lottieInteractivity]:\", \" Specified player is invalid.\"), m);\n    }\n\n    \"string\" == typeof f && (f = document.querySelector(f)), f || (f = m.wrapper), this.player = m, this.container = f, this.mode = d, this.actions = c, this.options = v, this.assignedSegment = null;\n  }\n\n  var u, c, f;\n  return u = a, (c = [{\n    key: \"getContainerVisibility\",\n    value: function () {\n      var e = this.container.getBoundingClientRect(),\n          t = e.top,\n          n = e.height;\n      return (window.innerHeight - t) / (window.innerHeight + n);\n    }\n  }, {\n    key: \"getContainerCursorPosition\",\n    value: function (e, t) {\n      var n = this.container.getBoundingClientRect(),\n          i = n.top;\n      return {\n        x: (e - n.left) / n.width,\n        y: (t - i) / n.height\n      };\n    }\n  }, {\n    key: \"start\",\n    value: function () {\n      var e = this;\n      \"scroll\" === this.mode && this.player.addEventListener(\"DOMLoaded\", function () {\n        e.player.loop = !0, e.player.stop(), window.addEventListener(\"scroll\", o(e, y));\n      }), \"cursor\" === this.mode && this.player.addEventListener(\"DOMLoaded\", function () {\n        e.player.loop = !0, e.player.stop(), e.container.addEventListener(\"mousemove\", o(e, s)), e.container.addEventListener(\"mouseout\", o(e, l));\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function () {\n      \"scroll\" === this.mode && window.removeEventListener(\"scroll\", o(this, y)), \"cursor\" === this.mode && (this.container.addEventListener(\"mousemove\", o(this, s)), this.container.addEventListener(\"mouseout\", o(this, l)));\n    }\n  }]) && n(u.prototype, c), f && n(u, f), a;\n}(),\n    s = new WeakMap(),\n    l = new WeakMap(),\n    p = new WeakMap(),\n    y = new WeakMap(),\n    u = function (e) {\n  var t = new a(e);\n  return t.start(), t;\n};\n\nexport default u;\nexport { a as LottieInteractivity, u as create };","map":{"version":3,"sources":["../src/main.js"],"names":["DEFAULT_OPTIONS","player","LottieInteractivity","actions","container","mode","options","_typeof","constructor","name","elem","document","querySelector","nodeName","getLottie","HTMLElement","Error","wrapper","assignedSegment","top","height","this","getBoundingClientRect","window","innerHeight","cursorX","cursorY","left","width","x","y","Parentscope","addEventListener","loop","stop","removeEventListener","_this","e","clientX","clientY","pos","getContainerCursorPosition","action","find","position","Array","isArray","Number","isNaN","type","xPercent","yPercent","playSegments","frames","goToAndStop","Math","floor","totalFrames","ceil","isPaused","resetSegments","currentPercent","getContainerVisibility","visibility","play","create","instance","start"],"mappings":"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","sourcesContent":["const DEFAULT_OPTIONS = {\n  player: 'lottie-player',\n};\nconst LOTTIE_PLAYER_NODE = 'LOTTIE-PLAYER';\nconst ERROR_PREFIX = '[lottieInteractivity]:';\n\n/**\n * LottieFiles interactivity for Lottie\n */\nexport class LottieInteractivity {\n  constructor({ actions, container, mode, player, ...options } = DEFAULT_OPTIONS) {\n    // Resolve lottie instance specified in player option\n    if (!(typeof player === 'object' && player.constructor.name === 'AnimationItem')) {\n      if (typeof player === 'string') {\n        const elem = document.querySelector(player);\n\n        if (elem && elem.nodeName === LOTTIE_PLAYER_NODE) {\n          player = elem.getLottie();\n        }\n      } else if (player instanceof HTMLElement && player.nodeName === LOTTIE_PLAYER_NODE) {\n        player = player.getLottie();\n      }\n\n      // Throw error no player instance has been successfully resolved\n      if (!player) {\n        throw new Error(`${ERROR_PREFIX} Specified player is invalid.`, player);\n      }\n    }\n\n    // Get the configured container element.\n    if (typeof container === 'string') {\n      container = document.querySelector(container);\n    }\n\n    // Use player wrapper as fallback if container couldn't be resolved.\n    if (!container) {\n      container = player.wrapper;\n    }\n\n    this.player = player;\n    this.container = container;\n    this.mode = mode;\n    this.actions = actions;\n    this.options = options;\n    this.assignedSegment = null;\n  }\n\n  getContainerVisibility() {\n    // Get the bounding box for the lottie player or container\n    const { top, height } = this.container.getBoundingClientRect();\n\n    // Calculate current view percentage\n    const current = window.innerHeight - top;\n    const max = window.innerHeight + height;\n    return current / max;\n  }\n\n  getContainerCursorPosition(cursorX, cursorY) {\n    const { top, left, width, height } = this.container.getBoundingClientRect();\n\n    const x = (cursorX - left) / width;\n    const y = (cursorY - top) / height;\n\n    return { x, y };\n  }\n\n  start() {\n    const Parentscope = this;\n    // Configure player for start\n    if (this.mode === 'scroll') {\n      this.player.addEventListener('DOMLoaded', function () {\n        Parentscope.player.loop = true;\n        Parentscope.player.stop();\n        window.addEventListener('scroll', Parentscope.#scrollHandler);\n      });\n    }\n\n    if (this.mode === 'cursor') {\n      this.player.addEventListener('DOMLoaded', function () {\n        Parentscope.player.loop = true;\n        Parentscope.player.stop();\n        Parentscope.container.addEventListener('mousemove', Parentscope.#mousemoveHandler);\n        Parentscope.container.addEventListener('mouseout', Parentscope.#mouseoutHandler);\n      });\n    }\n  }\n\n  stop() {\n    if (this.mode === 'scroll') {\n      window.removeEventListener('scroll', this.#scrollHandler);\n    }\n\n    if (this.mode === 'cursor') {\n      this.container.addEventListener('mousemove', this.#mousemoveHandler);\n      this.container.addEventListener('mouseout', this.#mouseoutHandler);\n    }\n  }\n\n  #mousemoveHandler = e => {\n    this.#cursorHandler(e.clientX, e.clientY);\n  };\n\n  #mouseoutHandler = () => {\n    this.#cursorHandler(-1, -1);\n  };\n\n  #cursorHandler = (x, y) => {\n    // Resolve cursor position if cursor is inside container\n    if (x !== -1 && y !== -1) {\n      // Get container cursor position\n      const pos = this.getContainerCursorPosition(x, y);\n\n      // Use the resolved position\n      x = pos.x;\n      y = pos.y;\n    }\n\n    // Find the first action that satisfies the current position conditions\n    const action = this.actions.find(({ position }) => {\n      if (Array.isArray(position.x) && Array.isArray(position.y)) {\n        return x >= position.x[0] && x <= position.x[1] && y >= position.y[0] && y <= position.y[1];\n      } else if (!Number.isNaN(position.x) && !Number.isNaN(position.y)) {\n        return x === position.x && y === position.y;\n      }\n\n      return false;\n    });\n\n    // Skip if no matching action was found!\n    if (!action) {\n      return;\n    }\n\n    // Process action types:\n    if (action.type === 'seek') {\n      // Seek: Go to a frame based on player scroll position action\n      const xPercent = (x - action.position.x[0]) / (action.position.x[1] - action.position.x[0]);\n      const yPercent = (y - action.position.y[0]) / (action.position.y[1] - action.position.y[0]);\n\n      this.player.playSegments(action.frames, true);\n\n      if (action.position.y[0] < 0 && action.position.y[1] > 1) {\n        this.player.goToAndStop(Math.floor(xPercent * this.player.totalFrames), true);\n      } else {\n        this.player.goToAndStop(Math.ceil(((xPercent + yPercent) / 2) * this.player.totalFrames), true);\n      }\n    } else if (action.type === 'loop') {\n      this.player.playSegments(action.frames, true);\n    } else if (action.type === 'play') {\n      // Play: Reset segments and continue playing full animation from current position\n      if (this.player.isPaused === true) {\n        this.player.resetSegments();\n      }\n      this.player.playSegments(action.frames);\n    } else if (action.type === 'stop') {\n      // Stop: Stop playback\n      this.player.goToAndStop(action.frames[0], true);\n    }\n  };\n\n  #scrollHandler = () => {\n    // Get container visibility percentage\n\n    const currentPercent = this.getContainerVisibility();\n\n    // Find the first action that satisfies the current position conditions\n    const action = this.actions.find(\n      ({ visibility }) => currentPercent >= visibility[0] && currentPercent <= visibility[1],\n    );\n\n    // Skip if no matching action was found!\n    if (!action) {\n      return;\n    }\n\n    // Process action types:\n    if (action.type === 'seek') {\n      // Seek: Go to a frame based on player scroll position action\n      this.player.goToAndStop(\n        Math.ceil(\n          ((currentPercent - action.visibility[0]) / (action.visibility[1] - action.visibility[0])) *\n            this.player.totalFrames,\n        ),\n        true,\n      );\n    } else if (action.type === 'loop') {\n      // Loop: Loop a given frames\n      if (this.assignedSegment === null) {\n        // if not playing any segments currently. play those segments and save to state\n        this.player.playSegments(action.frames, true);\n        this.assignedSegment = action.frames;\n      } else {\n        // if playing any segments currently.\n        //check if segments in state are equal to the frames selected by action\n        if (this.assignedSegment !== action.frames) {\n          // if they are not equal. new segments are to be loaded\n          this.player.playSegments(action.frames, true);\n          this.assignedSegment = action.frames;\n        } else {\n          // if they are equal the play method must be called only if lottie is paused\n          if (this.player.isPaused === true) {\n            this.player.playSegments(action.frames, true);\n            this.assignedSegment = action.frames;\n          }\n        }\n      }\n    } else if (action.type === 'play') {\n      // Play: Reset segments and continue playing full animation from current position\n      if (this.player.isPaused === true) {\n        this.player.resetSegments();\n        this.player.play();\n      }\n    } else if (action.type === 'stop') {\n      // Stop: Stop playback\n      this.player.goToAndStop(action.frames[0], true);\n    }\n  };\n}\n\nexport const create = options => {\n  const instance = new LottieInteractivity(options);\n  instance.start();\n\n  return instance;\n};\n\nexport default create;\n"]},"metadata":{},"sourceType":"module"}